<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <title>Luciano Castañón Estrada</title>
  <style>
    :root{
      --sidebar-w: 260px;
      --text: #111;
      --muted:#777;
      --link:#000;
      --link-hover:#666;
      --light-gray:#aaa;
    }
    html{scroll-behavior:smooth; font-size:15px;}
    body{
      margin:0; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,Ubuntu,"Noto Sans",sans-serif; color:var(--text); line-height:1.5;
      background:#fff;
      font-size:15px;
    }
    a{ color: var(--link); text-decoration: none;}
    a:hover{ color: var(--link-hover);}

    /* LAYOUT */
    .wrap{ display:flex; align-items:flex-start;}
    .sidebar{ position:fixed; inset:0 auto 0 0; width:var(--sidebar-w); padding:24px 20px; box-sizing:border-box; background:#fff; font-size:14px;}
    .brand{ font-weight:600; margin-bottom:16px; font-size:15px;}
    .nav{ display:flex; flex-direction:column; gap:6px; font-size:13px;}
    .nav .year{ color:var(--muted); font-size:11px; margin-left:6px;}
    .nav a.active{}
    .nav a[href="#info"] {
      color: var(--light-gray);
    }

    .content{ margin-left:var(--sidebar-w); padding:24px 20px 70px; max-width:1100px; width:100%; box-sizing:border-box; background:#fff; font-size:15px;}

    /* CONTENT SECTIONS */
    section{ margin-bottom:40px; scroll-margin-top:0; }
    .spacer{ height:8px; }
    .info{ max-width:850px; font-size:13px; }

    /* PROJECT FEED */
    .project{ margin-bottom:70px; font-size:14px;}
    .project .images{ display:flex; flex-direction:column; gap:18px; }
    .project figure{ margin:0; }
    .project img{ width:100%; height:auto; display:block; border:0; }
    .caption{ margin-top:8px; font-size:13px; color: var(--muted);}

    /* Helpers */
    .muted{ color:var(--muted); }

    /* RESPONSIVE */
    @media (max-width: 880px){
      :root{ --sidebar-w: 200px; }
    }
    @media (max-width: 720px){
      .sidebar{ position:sticky; top:0; width:100%; border-bottom:1px solid #eee; background:#fff;}
      .nav{ flex-direction:row; flex-wrap:wrap; gap:10px 14px; }
      .brand{ margin-bottom:6px;}
      .content{ margin-left:0;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- SIDEBAR / ÍNDICE FIJO -->
    <aside class="sidebar" aria-label="Índice de navegación">
      <div class="brand">Luciano Castañón Estrada</div>
      <nav class="nav" id="sidebar-nav">
        <a href="#info">Info</a>
        <a href="#cookie">Cookie <span class="year">· 2015</span></a>
        <a href="#new-ashtrays">New Ashtrays <span class="year">· 2015</span></a>
        <a href="#nine-nine-nine">999 <span class="year">· 2014</span></a>
        <a href="#global-understanding">Global Understanding <span class="year">· 2014</span></a>
      </nav>
    </aside>

    <!-- CONTENIDO -->
    <main class="content">
      <!-- Sección de texto -->
      <section id="info" class="info" tabindex="-1">
        <p style="font-size:13px;">Luciano Castañón Estrada studied at Goldsmiths University, London. He lives and works in Madrid, Spain.<br><br>Contact <a href="mailto:elecene@gmail.com">elecene@gmail.com</a></p>
      </section>

      <!-- PROYECTO COOKIE -->
      <section id="cookie" class="project" tabindex="-1">
        <div class="images">
          <figure>
            <img src="https://res.cloudinary.com/dorpctyfh/image/upload/v1759093585/la_foto_2_mnxzee.jpg" alt="Cookie" />
          </figure>
        </div>
        <div class="caption">Cookie, 2015</div>
      </section>

      <!-- PROYECTO 1 -->
      <section id="new-ashtrays" class="project" tabindex="-1">
        <div class="images">
          <figure>
            <img src="https://res.cloudinary.com/dorpctyfh/image/upload/v1760289230/visa_02_omzzva.jpg" alt="New Ashtrays" />
            <img src="https://res.cloudinary.com/dorpctyfh/image/upload/v1759059832/asset_web_2_vjt1rn.png" alt="New Ashtrays" />
          </figure>
        </div>
        <div class="caption">New Ashtrays, 2015</div>
      </section>

      <!-- PROYECTO 2 -->
      <section id="nine-nine-nine" class="project" tabindex="-1">
        <div class="images">
          <figure>
            <img src="https://res.cloudinary.com/dorpctyfh/image/upload/v1759060290/IMG_0459_ndzelf.jpg" alt="999" />
          </figure>
        </div>
        <div class="caption">999, 2014</div>
      </section>

      <!-- PROYECTO 3 -->
      <section id="global-understanding" class="project" tabindex="-1">
        <div class="images">
          <figure>
            <img src="https://res.cloudinary.com/dorpctyfh/image/upload/v1759060533/asset_global_understanding_puuxt2.png" alt="Global Understanding" />
          </figure>
        </div>
        <div class="caption">Global Understanding, 2014</div>
      </section>

      <div class="spacer"></div>
    </main>
  </div>

  <script>
    const links = Array.from(document.querySelectorAll('#sidebar-nav a'));
    const sections = links
      .map(a => document.querySelector(a.getAttribute('href')))
      .filter(Boolean);

    const byId = (id) => links.find(a => a.getAttribute('href') === `#${id}`);

    function setActive(section){
      links.forEach(l => l.classList.remove('active'));
      const link = byId(section.id);
      if(link) link.classList.add('active');
    }

    function pickCurrentSection(){
      const vpCenter = window.innerHeight * 0.35;
      let best = null;
      let bestDist = Infinity;
      for(const sec of sections){
        const rect = sec.getBoundingClientRect();
        const visible = rect.bottom > 0 && rect.top < window.innerHeight;
        if(visible){
          const dist = Math.abs(rect.top - vpCenter);
          if(dist < bestDist){ best = sec; bestDist = dist; }
        }
      }
      return best || sections[0];
    }

    let ticking = false;
    function onScroll(){
      if(!ticking){
        window.requestAnimationFrame(() => {
          setActive(pickCurrentSection());
          ticking = false;
        });
        ticking = true;
      }
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onScroll);
    setActive(pickCurrentSection());

    links.forEach(link => {
      link.addEventListener('click', (e) => {
        const href = link.getAttribute('href');
        const target = document.querySelector(href);
        if(!target) return;
        // Evita el scroll nativo del ancla (que puede interferir con nuestra posición calculada)
        e.preventDefault();

        setActive(target);

        // Calcula un destino que oculte la imagen superior cuando sea posible
        let topY;
        if (href === '#info') {
          // Deja aire arriba para Info
          topY = target.getBoundingClientRect().top + window.scrollY - 200;
        } else {
          // Para proyectos, alinea el inicio de la PRIMERA imagen con el borde superior
          const firstImg = target.querySelector('img, figure, .images');
          const el = firstImg || target;
          const rect = el.getBoundingClientRect();
          topY = rect.top + window.scrollY - 4; // pequeño margen para ocultar lo anterior
        }

        window.scrollTo({ top: Math.max(0, topY), behavior: 'smooth' });
        // Actualiza la URL sin "saltar"
        history.pushState(null, '', href);
        // Foco post-scroll para accesibilidad
        setTimeout(() => target.focus({ preventScroll: true }), 400);
      });
    });
  </script>
</body>
</html>
